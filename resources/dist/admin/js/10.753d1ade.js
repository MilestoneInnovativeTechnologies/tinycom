(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{4090:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fit row no-wrap items-center content-start"},[a("div",{staticClass:"col-grow",staticStyle:{overflow:"auto"}},[a("q-input",{attrs:{outlined:"",value:e.value,clearable:"",dense:"",placeholder:"Search.."},on:{input:function(t){return e.$emit("input",t)}},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}])})],1),a("div",[e._v("   ")]),a("div",{staticStyle:{overflow:"auto"}},[a("q-btn",{attrs:{label:e.action||"NEW",color:"primary"},on:{click:function(t){return e.$emit(e.action||"new")}}})],1)])},n=[],r={name:"SearchAndAction",props:["value","action"]},o=r,i=a("2877"),l=a("27f9"),c=a("0016"),d=a("9c40"),u=a("eebe"),m=a.n(u),p=Object(i["a"])(o,s,n,!1,null,null,null);t["a"]=p.exports;m()(p,"components",{QInput:l["a"],QIcon:c["a"],QBtn:d["a"]})},b185:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-table",{attrs:{title:e.title,data:e.records,columns:e.columns,dense:"","no-data-label":e.empty,"row-key":e.row_key,pagination:{rowsPerPage:e.limit||5},"rows-per-page-label":"Per Page"},scopedSlots:e._u([e.route?{key:"body-cell-action",fn:function(t){return[a("q-td",{attrs:{props:t}},[a("q-btn",{attrs:{dense:"",flat:"",icon:"double_arrow",size:"sm",color:"primary",to:{name:e.route,params:{id:t.value,back:e.back}}}})],1)]}}:null],null,!0)})},n=[],r={name:"RecordList",props:["records","title","empty","limit","layout","route","row_key","back"],computed:{columns(){return this.route?_.concat(this.layout,[{name:"action",field:this.row_key,label:" "}]):this.layout}}},o=r,i=a("2877"),l=a("eaac"),c=a("db86"),d=a("9c40"),u=a("eebe"),m=a.n(u),p=Object(i["a"])(o,s,n,!1,null,null,null);t["a"]=p.exports;m()(p,"components",{QTable:l["a"],QTd:c["a"],QBtn:d["a"]})},d000:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{attrs:{padding:""}},[a("SearchAndAction",{attrs:{action:"add"},on:{add:function(t){e.create=!0}},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),a("Customers",{staticClass:"q-mt-sm",attrs:{filter:e.filter,source:"customers"}}),a("GroupsCard",{staticClass:"q-mt-sm"}),a("q-dialog",{attrs:{persistent:""},model:{value:e.create,callback:function(t){e.create=t},expression:"create"}},[a("CreateCustomerCard",{staticStyle:{width:"90vw"},on:{created:function(t){e.create=!1}}})],1)],1)},n=[],r=a("4090"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("RecordList",{attrs:{records:e.customers,layout:e.columns,row_key:"id",limit:e.limit||25,back:e.source,route:"customer"}})},i=[],l=(a("ddb0"),a("b185")),c={name:"Customers",components:{RecordList:l["a"]},props:["limit","filter","source"],data(){return{columns:[{name:"serial",field:"id",label:"#",format:e=>e},{name:"name",field:"name",label:"Name",align:"left"},{name:"phone",field:"phone",label:"Phone"}],layout:{ID:"id",Name:"name",Phone:"phone"},name:"",phone:"",address:""}},computed:{records(){return _.values(this.$store.state.CUSTOMERS.CUSTOMERS)},customers(){return this.filter?_.filter(this.records,(({name:e,phone:t,address:a})=>_.includes([e,t,a].join(" ").toLowerCase(),_.toLower(this.filter)))):this.records}},methods:{create(e){if(!e)return $(this.$refs["customer_create_modal"]).modal("show");this.name&&this.phone&&this.$store.dispatch("CUSTOMERS/create",{name:this.name,phone:this.phone,address:this.address}).then((()=>{this.name="",this.phone=""}))}}},d=c,u=a("2877"),m=Object(u["a"])(d,o,i,!1,null,null,null),p=m.exports,h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-card",[a("q-card-section",{staticClass:"row items-center q-pb-none"},[a("div",{staticClass:"text-h6"},[e._v("Add New Customer")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),a("q-card-section",[a("q-form",{ref:"create_customer_form",staticClass:"q-gutter-sm",attrs:{autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false"}},[a("q-input",{attrs:{type:"text",name:"name",label:"Name",dense:"",outlined:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("q-input",{attrs:{type:"number",name:"phone",label:"Phone",dense:"",outlined:""},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),a("q-input",{attrs:{type:"textarea",name:"address",label:"Address",dense:"",outlined:""},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1)],1),a("q-card-actions",{staticClass:"q-px-md q-pt-none",attrs:{align:"right"}},[a("q-btn",{attrs:{push:"",label:"Submit",color:"primary",loading:e.loading},on:{click:e.create}})],1)],1)},f=[],b={name:"CreateCustomerCard",data(){return{loading:!1,name:"",phone:"",address:""}},computed:{},methods:{create(){this.loading=!0,this.name&&this.phone?this.$store.dispatch("CUSTOMERS/create",new FormData(this.$refs["create_customer_form"].$el)).then((()=>{this.loading=!1,this.name=this.phone=this.address="",this.$emit("created")})):this.loading=!1}}},C=b,v=a("f09f"),q=a("a370"),g=a("2c91"),S=a("9c40"),w=a("0378"),Q=a("27f9"),k=a("4b7e"),y=a("7f67"),x=a("eebe"),O=a.n(x),E=Object(u["a"])(C,h,f,!1,null,null,null),R=E.exports;O()(E,"components",{QCard:v["a"],QCardSection:q["a"],QSpace:g["a"],QBtn:S["a"],QForm:w["a"],QInput:Q["a"],QCardActions:k["a"]}),O()(E,"directives",{ClosePopup:y["a"]});var U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-card",[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("Groups")])]),a("q-list",{attrs:{separator:"",padding:""}},[a("q-item",[a("q-item-section",[a("q-item-label",{attrs:{caption:""}},[a("q-input",{attrs:{label:"New Group Name",outlined:"",dense:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1),a("q-item-section",{attrs:{side:""}},[a("q-btn",{attrs:{icon:"save",dense:"",color:"primary",round:"",loading:e.loading},on:{click:e.create}})],1)],1),e._l(e.GROUPS,(function(t){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:"customer-group-"+t.id,attrs:{clickable:""},on:{click:function(a){return e.update(t.id)}}},[a("q-item-section",[a("q-item-label",{staticClass:"text-bold"},[e._v(e._s(t.name))]),a("q-item-label",{attrs:{caption:"",lines:"3"}},[e._v(e._s((t.customers||[]).length)+" Customers: "+e._s(e.getNames(t.customers).join(", ")))])],1)],1)}))],2),a("q-dialog",{attrs:{persistent:"","full-width":""},model:{value:e.edit,callback:function(t){e.edit=t},expression:"edit"}},[a("GroupUpdateCard",{attrs:{id:e.item},on:{done:e.done}})],1)],1)},T=[],M=a("ded3"),N=a.n(M),P=a("2f62"),G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.id?a("q-card",[a("q-card-section",{staticClass:"row items-center q-pb-none"},[a("div",{staticClass:"text-h6"},[e._v("Update Group")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),a("q-card-section",[a("q-input",{attrs:{dense:"",outlined:"",label:"Group Name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("q-list",{attrs:{dense:"",separator:""}},e._l(e.all,(function(t){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:"group-update-customer-"+t.id,attrs:{tag:"label"}},[a("q-item-section",{attrs:{avatar:""}},[a("q-checkbox",{attrs:{val:t.id,color:"primary"},model:{value:e.customers,callback:function(t){e.customers=t},expression:"customers"}})],1),a("q-item-section",[a("q-item-label",[e._v(e._s(t.name))])],1)],1)})),1),a("q-card-actions",{staticClass:"q-px-md",attrs:{align:"right"}},[a("q-btn",{attrs:{loading:e.loading,label:"Update",color:"primary",padding:"xs sm"},on:{click:e.update}})],1)],1):e._e()},I=[],j={name:"GroupUpdateCard",props:["id"],data(){return{loading:!1}},computed:{all(){return this.$store.state.CUSTOMERS.CUSTOMERS},group(){return _.find(this.$store.state.CUSTOMERS.GROUPS,["id",this.id])},customers:{get(){return this.group.customers||[]},set(e){this.$store.commit("CUSTOMERS/group",{id:this.id,customers:e})}},name:{get(){return this.group.name||""},set(e){this.$store.commit("CUSTOMERS/group",{id:this.id,name:e})}}},methods:{update(){if(this.loading=!0,!this.name)return this.loading=!1;this.$store.dispatch("CUSTOMERS/group",{id:this.id,name:this.name,customers:this.customers}).then((()=>{this.loading=!1,this.$emit("done")}))}}},A=j,L=a("1c1c"),B=a("66e5"),D=a("4074"),z=a("8f8e"),F=a("0170"),J=a("714f"),V=Object(u["a"])(A,G,I,!1,null,null,null),W=V.exports;O()(V,"components",{QCard:v["a"],QCardSection:q["a"],QSpace:g["a"],QBtn:S["a"],QInput:Q["a"],QList:L["a"],QItem:B["a"],QItemSection:D["a"],QCheckbox:z["a"],QItemLabel:F["a"],QCardActions:k["a"]}),O()(V,"directives",{ClosePopup:y["a"],Ripple:J["a"]});var H={name:"GroupsCard",components:{GroupUpdateCard:W},data(){return{name:"",loading:!1,item:null,edit:!1}},computed:N()(N()({},Object(P["b"])("CUSTOMERS",["GROUPS","CUSTOMERS"])),{},{names(){return _(this.CUSTOMERS).keyBy("id").mapValues("name").value()}}),methods:{getNames(e){return _.map(e||[],(e=>this.names[e]))},create(){if(this.loading=!0,!this.name)return this.loading=!1;this.$store.dispatch("CUSTOMERS/group",{name:this.name}).then((()=>this.loading=""==this.name))},update(e){this.item=e,this.edit=!0},done(){this.item=null,this.edit=!1}}},K=H,X=a("24e8"),Y=Object(u["a"])(K,U,T,!1,null,null,null),Z=Y.exports;O()(Y,"components",{QCard:v["a"],QCardSection:q["a"],QList:L["a"],QItem:B["a"],QItemSection:D["a"],QItemLabel:F["a"],QInput:Q["a"],QBtn:S["a"],QDialog:X["a"]}),O()(Y,"directives",{Ripple:J["a"]});var ee={name:"PageCustomers",components:{GroupsCard:Z,CreateCustomerCard:R,Customers:p,SearchAndAction:r["a"]},data(){return{filter:"",create:!1}}},te=ee,ae=a("9989"),se=Object(u["a"])(te,s,n,!1,null,null,null);t["default"]=se.exports;O()(se,"components",{QPage:ae["a"],QDialog:X["a"]})}}]);