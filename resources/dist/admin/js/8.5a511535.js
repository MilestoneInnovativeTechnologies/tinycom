(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"0e49":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{attrs:{padding:""}},[s("SourceDetailCard",{attrs:{id:e.id}}),s("SourceExtendCard",{staticClass:"q-mt-sm",attrs:{id:e.id}}),s("SourceShareCard",{staticClass:"q-mt-sm",attrs:{id:e.id}}),e.hasBack?s("BackButton",{staticClass:"q-mt-sm",attrs:{right:"",to:e.backRoute}}):e._e()],1)},a=[],i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-card",[e.image?s("img",{attrs:{src:e.image}}):e._e(),s("q-card-section",[s("div",{staticClass:"text-h6"},[e._v(e._s(e.source.title))]),s("div",{staticClass:"text-caption"},[e._v(e._s(e.source.desc))])]),s("q-list",{attrs:{dense:"",separator:""}},[s("q-item-label",{attrs:{header:""}},[e._v("Items")]),e._l(e.source.items,(function(t){return s("q-item",{key:["source","item",t.item].join("-")},[s("q-item-section",[e._v(e._s(t.name))]),s("q-item-section",{attrs:{side:""}},[e._v(e._s(t.price))])],1)}))],2),s("q-list",{attrs:{dense:"",separator:""}},[s("q-item-label",{attrs:{header:""}},[e._v("Other Details")]),e._l(e.layout,(function(t,r){return s("q-item",{key:["source","other",t].join("-")},[s("q-item-section",[e._v(e._s(r))]),s("q-item-section",{attrs:{side:""}},[e._v(e._s(e.source[t]))])],1)}))],2)],1)},n=[],o={name:"SourceDetailCard",props:["id"],computed:{source(){return this.$store.getters["SOURCES/source"](this.id)},image(){return _.isEmpty(this.source.media)?null:imageUrl(this.source.media[0])},layout(){return{Status:"status",Expire:"expire",Orders:"orders",Hits:"hit","Hits after expire":"expire_hits"}}}},c=o,u=s("2877"),l=s("f09f"),d=s("a370"),p=s("1c1c"),m=s("0170"),h=s("66e5"),x=s("4074"),q=s("eebe"),C=s.n(q),S=Object(u["a"])(c,i,n,!1,null,null,null),b=S.exports;C()(S,"components",{QCard:l["a"],QCardSection:d["a"],QList:p["a"],QItemLabel:m["a"],QItem:h["a"],QItemSection:x["a"]});var g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.source?s("q-card",{key:e.card_upd},[s("q-card-section",{staticClass:"q-pb-none"},[s("div",{staticClass:"text-h6"},[e._v("Extend expire time from now")])]),s("q-card-section",{staticClass:"q-py-none"},[s("q-form",{ref:"source_extend_form"},[s("div",{staticClass:"row q-col-gutter-sm"},[s("q-input",{staticClass:"col-6",attrs:{type:"number",dense:"",outlined:""},model:{value:e.exp_num,callback:function(t){e.exp_num=t},expression:"exp_num"}}),s("q-select",{staticClass:"col-6",attrs:{dense:"",outlined:"",options:e.exp_period_opts,"emit-value":"","map-options":""},model:{value:e.exp_period,callback:function(t){e.exp_period=t},expression:"exp_period"}})],1)])],1),s("q-card-actions",{staticClass:"q-pt-xs q-px-md"},[s("q-btn",{staticClass:"full-width",attrs:{loading:e.loading,push:"",color:"primary",label:"Extend"},on:{click:e.extend}})],1)],1):e._e()},v=[],f={name:"SourceExtendCard",props:["id"],data(){return{loading:!1,card_upd:0,exp_num:1,exp_period:60,exp_period_opts:[{label:"Minute",value:60},{label:"Hour",value:3600},{label:"Day",value:86400}]}},computed:{source(){return this.$store.getters["SOURCES/source"](this.id)},expire(){return _.toSafeInteger(this.exp_num)*_.toSafeInteger(this.exp_period)}},methods:{extend(){this.loading=!0;let e=new FormData;e.append("id",this.id),e.append("expire",this.expire),this.$store.dispatch("SOURCES/extend",e).then((e=>this.card_upd+=_.toSafeInteger(!(this.loading=!1))))}}},k=f,Q=s("0378"),E=s("27f9"),y=s("ddd8"),B=s("4b7e"),O=s("9c40"),w=Object(u["a"])(k,g,v,!1,null,null,null),R=w.exports;C()(w,"components",{QCard:l["a"],QCardSection:d["a"],QForm:Q["a"],QInput:E["a"],QSelect:y["a"],QCardActions:B["a"],QBtn:O["a"]});var $=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.source?s("q-card",[s("q-card-section",{staticClass:"q-pb-none"},[s("q-input",{staticStyle:{height:"4rem"},attrs:{type:"textarea",outlined:"",dense:"",value:e.url,label:"Sharable Link"}})],1),s("q-card-actions",{staticClass:"q-px-md q-gutter-sm"},[s("q-btn",{attrs:{type:"a",push:"",color:"primary",label:"Share via WhatsApp",href:e.whatsapp,target:"_blank"}})],1)],1):e._e()},I=[],U=(s("b06b"),{name:"SourceShareCard",props:["id"],computed:{source(){return this.$store.getters["SOURCES/source"](this.id)},phone(){return 1===this.source.customers.length?"91"+_.get(this.$store.getters["CUSTOMERS/customer"](this.source.customers[0]),"phone"):""},url(){return urlParse("SOURCE_LINK",{uuid:this.source.uuid})},whatsapp(){return urlParse("WHATSAPP",{text:this.url,phone:this.phone})}}}),j=U,A=Object(u["a"])(j,$,I,!1,null,null,null),D=A.exports;C()(A,"components",{QCard:l["a"],QCardSection:d["a"],QInput:E["a"],QCardActions:B["a"],QBtn:O["a"]});var P=s("726e"),H={name:"PageSource",components:{SourceShareCard:D,SourceExtendCard:R,SourceDetailCard:b},props:["id"],mixins:[P["a"]],computed:{source(){return this.$store.getters["SOURCES/source"](this.id)}}},L=H,F=s("9989"),J=Object(u["a"])(L,r,a,!1,null,null,null);t["default"]=J.exports;C()(J,"components",{QPage:F["a"]})},"726e":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var r=s("74c9");const a={props:["back"],components:{BackButton:r["a"]},computed:{hasBack(){return!!this.back},backRoute(){return this.hasBack?this.getBackRoute():null}},methods:{getBackRoute(){let e=this.back;return _.isString(e)?{name:e}:_.isArray(e)?{name:e[0],params:{id:e[1]}}:null}}}},"74c9":function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:e.cls},[s("q-btn",{staticClass:"q-px-sm q-py-xs",attrs:{dense:"",size:"sm",label:"Back",icon:"reply_all",color:"warning",to:e.to}})],1)},a=[],i={name:"BackButton",props:["right","to"],computed:{cls(){return void 0!==this.right?["text-right"]:["text-left"]}}},n=i,o=s("2877"),c=s("9c40"),u=s("eebe"),l=s.n(u),d=Object(o["a"])(n,r,a,!1,null,null,null);t["a"]=d.exports;l()(d,"components",{QBtn:c["a"]})}}]);