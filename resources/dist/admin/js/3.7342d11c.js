(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"4e6f":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-markup-table",{attrs:{dense:""}},[a("thead",{staticClass:"text-left"},[a("tr",[a("th",[t._v("ID")]),a("th",[t._v("Status")]),a("th",[t._v("Name")]),a("th",[t._v("Description")]),a("th",[t._v("Â ")])])]),a("tbody",t._l(t.items,(function(e,s){return a("ItemUpdateRow",t._b({key:["active","item","update","row",s].join("-")},"ItemUpdateRow",e,!1))})),1)])},r=[],i=(a("e01a"),a("806c")),n={name:"InActiveItems",components:{ItemUpdateRow:i["a"]},props:["filter"],computed:{items(){return _(this.$store.getters["ITEMS/all"]).filter((({status:t})=>"N"===t)).filter((({name:t,description:e})=>_.isEmpty(this.filter)||_.includes(_.toLower(t+e),_.toLower(this.filter)))).value()}}},o=n,d=a("2877"),l=a("2bb1"),c=a("eebe"),u=a.n(c),p=Object(d["a"])(o,s,r,!1,null,null,null);e["a"]=p.exports;u()(p,"components",{QMarkupTable:l["a"]})},"726e":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var s=a("74c9");const r={props:["back"],components:{BackButton:s["a"]},computed:{hasBack(){return!!this.back},backRoute(){return this.hasBack?this.getBackRoute():null}},methods:{getBackRoute(){let t=this.back;return _.isString(t)?{name:t}:_.isArray(t)?{name:t[0],params:{id:t[1]}}:null}}}},"74c9":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.cls},[a("q-btn",{staticClass:"q-px-sm q-py-xs",attrs:{dense:"",size:"sm",label:"Back",icon:"reply_all",color:"warning",to:t.to}})],1)},r=[],i={name:"BackButton",props:["right","to"],computed:{cls(){return void 0!==this.right?["text-right"]:["text-left"]}}},n=i,o=a("2877"),d=a("9c40"),l=a("eebe"),c=a.n(l),u=Object(o["a"])(n,s,r,!1,null,null,null);e["a"]=u.exports;c()(u,"components",{QBtn:d["a"]})},"806c":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-tr",[a("q-td",[t._v(t._s(t.id))]),a("q-td",[a("q-select",{staticStyle:{width:"3rem"},attrs:{options:t.options,dense:"",square:"",outlined:""},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1),a("q-td",[a("q-input",{staticStyle:{width:"8rem"},attrs:{type:"text",dense:"",square:"",outlined:"",debounce:1e3},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),a("q-td",[a("q-input",{staticStyle:{width:"8rem",height:"4rem"},attrs:{type:"textarea",dense:"",square:"",outlined:"",debounce:1e3},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1),a("q-td",[a("q-btn",{attrs:{icon:"double_arrow",flat:"",size:"sm",color:"primary",to:{name:"item",params:{id:t.id}}}})],1)],1)},r=[],i=(a("e01a"),{name:"ItemUpdateRow",props:["id"],data(){return{options:["Y","N"]}},computed:{name:{get(){return this.$attrs.name},set(t){this.dispatch({name:t})}},description:{get(){return this.$attrs.description},set(t){this.dispatch({description:t})}},status:{get(){return this.$attrs.status},set(t){this.dispatch({status:t})}}},methods:{formData(t){let e=new FormData;return _.forEach(t,((t,a)=>e.append(a,t))),{id:this.id,data:e,item:"item",action:"update"}},dispatch(t){this.$store.dispatch("SERVER/serverItemAction",this.formData(t))}}}),n=i,o=a("2877"),d=a("bd08"),l=a("db86"),c=a("ddd8"),u=a("27f9"),p=a("9c40"),m=a("eebe"),h=a.n(m),f=Object(o["a"])(n,s,r,!1,null,null,null);e["a"]=f.exports;h()(f,"components",{QTr:d["a"],QTd:l["a"],QSelect:c["a"],QInput:u["a"],QBtn:p["a"]})},"94eb":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{attrs:{padding:""}},[a("UpdateCustomerCard",{attrs:{id:t.id}}),a("UpdateAddressCard",{staticClass:"q-mt-sm",attrs:{id:t.id}}),a("CustomerGroupsCard",{staticClass:"q-mt-sm",attrs:{id:t.id}}),t.hasBack?a("BackButton",{staticClass:"q-mt-sm",attrs:{right:"",to:t.backRoute}}):t._e()],1)},r=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",[a("q-card-section",{staticClass:"row items-center q-pb-none"},[a("div",{staticClass:"text-h6"},[t._v("Update Customer")])]),a("q-card-section",[a("q-form",{ref:"update_customer_form",staticClass:"q-gutter-sm",attrs:{autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.id,expression:"id"}],attrs:{type:"hidden",name:"id"},domProps:{value:t.id},on:{input:function(e){e.target.composing||(t.id=e.target.value)}}}),a("q-input",{attrs:{type:"text",name:"name",label:"Name",dense:"",outlined:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),a("q-input",{attrs:{type:"number",name:"phone",label:"Phone",dense:"",outlined:""},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1)],1),a("q-card-actions",{staticClass:"q-px-md q-pt-none",attrs:{align:"right"}},[a("q-btn",{attrs:{label:"SHOP",color:"primary",to:{name:"home"},loading:t.loading}}),a("q-space"),a("q-btn",{attrs:{push:"",label:"Update",color:"primary",loading:t.loading},on:{click:t.update}}),a("q-btn",{staticClass:"q-mt-md full-width",attrs:{flat:"","text-color":"primary",label:"fetch from server",size:"sm",loading:t.loading},on:{click:t.fetch}})],1)],1)},n=[],o=(a("e6cf"),a("a79d"),a("4e6f")),d={name:"UpdateCustomerCard",components:{InActiveItems:o["a"]},props:["id"],data(){let{name:t,phone:e,address:a}=this.$store.getters["CUSTOMERS/customer"](this.id);return{loading:!1,name:t,phone:e,address:a}},methods:{update(){this.loading=!0,this.name&&this.phone?this.$store.dispatch("CUSTOMERS/update",new FormData(this.$refs["update_customer_form"].$el)).then((()=>this.loading=!1)):this.loading=!1},fetch(){this.loading=!0,this.$store.dispatch("CUSTOMERS/fetch",this.id).then((t=>["name","phone","address"].forEach((e=>this[e]=t[e])))).finally((()=>this.loading=!1))}}},l=d,c=a("2877"),u=a("f09f"),p=a("a370"),m=a("0378"),h=a("27f9"),f=a("4b7e"),b=a("9c40"),g=a("2c91"),q=a("eebe"),v=a.n(q),C=Object(c["a"])(l,i,n,!1,null,null,null),x=C.exports;v()(C,"components",{QCard:u["a"],QCardSection:p["a"],QForm:m["a"],QInput:h["a"],QCardActions:f["a"],QBtn:b["a"],QSpace:g["a"]});var S=a("726e"),k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("div",{staticClass:"text-h6"},[t._v("Address")]),a("q-space"),a("q-btn",{attrs:{icon:"add",color:"primary",round:""},on:{click:function(e){t.form=!t.form}}})],1),a("q-list",{attrs:{separator:""}},t._l(t.addresses,(function(e){return a("UpdateAddressItem",t._b({key:"update-address-"+e.id,on:{updating:function(a){return t.updating(e.id)}}},"UpdateAddressItem",e,!1))})),1)],1),a("q-dialog",{attrs:{persistent:"","full-width":""},on:{"before-hide":t.done},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}},[a("AddressFormCard",{attrs:{customer:t.id,id:t.update},on:{done:t.done}})],1)],1)},Q=[],$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[a("q-item-section",[a("q-item-label",{staticClass:"text-bold"},[t._v(t._s(t.title))]),a("q-item-label",{attrs:{caption:""},domProps:{innerHTML:t._s(t.address)}}),t.location?a("q-item-label",{attrs:{caption:""},domProps:{innerHTML:t._s(t.location)}}):t._e()],1),a("q-item-section",{attrs:{side:""}},[a("q-btn",{staticClass:"q-px-sm q-py-xs",attrs:{rounded:"",dense:"",size:"sm",color:"grey-2","text-color":"primary",icon:"edit"},on:{click:function(e){return t.$emit("updating")}}})],1)],1)},U=[],y=(a("5319"),{name:"UpdateAddressItem",props:["id","customer"],data(){return{loading:!1}},computed:{title:{get(){return this.$attrs.title},set(t){return this.$store.commit("USER/address",{id:this.id,title:t})}},address:{get(){return(this.$attrs.address||"").toString().replace("\n","<br />")},set(t){return this.$store.commit("USER/address",{id:this.id,address:t})}},location:{get(){return this.$attrs.location},set(t){return this.$store.commit("USER/address",{id:this.id,location:t})}}},methods:{doUpdate(){this.loading=!0,this.$store.dispatch("USER/address",{id:this.id,title:this.title,address:this.address,location:this.location},{root:!0}).then((()=>this.loading=!1))}}}),w=y,E=a("66e5"),R=a("4074"),I=a("0170"),O=a("714f"),A=Object(c["a"])(w,$,U,!1,null,null,null),B=A.exports;v()(A,"components",{QItem:E["a"],QItemSection:R["a"],QItemLabel:I["a"],QBtn:b["a"]}),v()(A,"directives",{Ripple:O["a"]});var T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",[a("q-card-section",{staticClass:"row items-center q-pb-none"},[a("div",{staticClass:"text-h6"},[t._v("Customer Address")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),a("q-card-section",{staticClass:"q-gutter-xs"},[a("q-input",{attrs:{outlined:"",label:"Title",type:"text"},model:{value:t.data.title,callback:function(e){t.$set(t.data,"title",e)},expression:"data.title"}}),a("q-input",{staticStyle:{height:"5rem"},attrs:{outlined:"",label:"Address",type:"textarea"},model:{value:t.data.address,callback:function(e){t.$set(t.data,"address",e)},expression:"data.address"}}),a("q-input",{attrs:{outlined:"",label:"Location",type:"text"},model:{value:t.data.location,callback:function(e){t.$set(t.data,"location",e)},expression:"data.location"}})],1),a("q-card-actions",{staticClass:"q-px-md",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"},on:{click:t.reset}}),a("q-btn",{attrs:{loading:t.loading,label:"SUBMIT",color:"primary"},on:{click:t.submit}})],1)],1)},M=[],j={name:"AddressFormCard",props:["id","customer"],data(){return{loading:!1,data:{title:"",address:"",location:""}}},computed:{adr(){return this.id?this.$store.getters["CUSTOMERS/address"][this.id]:{}}},methods:{reset(){this.data.title=this.data.address=this.data.location=""},submit(){if(this.loading=!0,!this.data.address||!this.data.title)return this.loading=!1;let t=_.assign({},this.data,{customer:this.customer});this.id&&(t["id"]=this.id),this.$store.dispatch("CUSTOMERS/address",t).then((t=>{this.loading=!1,this.$emit("done",t),this.reset()}))}},watch:{id:{immediate:!0,handler(t){t?_.forEach(this.adr,((t,e)=>_.has(this.data,e)?this.data[e]=t:null)):this.reset()}}}},L=j,N=a("7f67"),P=Object(c["a"])(L,T,M,!1,null,null,null),D=P.exports;v()(P,"components",{QCard:u["a"],QCardSection:p["a"],QSpace:g["a"],QBtn:b["a"],QInput:h["a"],QCardActions:f["a"]}),v()(P,"directives",{ClosePopup:N["a"]});var F={name:"UpdateAddressCard",components:{AddressFormCard:D,UpdateAddressItem:B},props:["id"],data(){return{form:!1,update:null}},computed:{addresses(){return this.$store.getters["CUSTOMERS/addresses"][this.id]}},methods:{updating(t){this.update=t,this.form=!0},done(){this.update=null,this.form=!1}}},G=F,z=a("1c1c"),H=a("24e8"),J=Object(c["a"])(G,k,Q,!1,null,null,null),V=J.exports;v()(J,"components",{QCard:u["a"],QCardSection:p["a"],QSpace:g["a"],QBtn:b["a"],QList:z["a"],QDialog:H["a"]});var Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.id?a("q-card",[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Groups")])]),a("q-list",{attrs:{dense:"",separator:""}},t._l(t.all,(function(e){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:"customer-group-update-"+e.id,attrs:{tag:"label"}},[a("q-item-section",{attrs:{avatar:""}},[a("q-checkbox",{attrs:{val:e.id,color:"primary"},model:{value:t.groups,callback:function(e){t.groups=e},expression:"groups"}})],1),a("q-item-section",[a("q-item-label",[t._v(t._s(e.name))])],1)],1)})),1),a("q-card-actions",{staticClass:"q-px-md",attrs:{align:"right"}},[a("q-btn",{attrs:{label:"Update Groups",color:"primary"},on:{click:t.update}})],1)],1):t._e()},K=[],W={name:"CustomerGroupsCard",props:["id"],computed:{all(){return this.$store.state.CUSTOMERS.GROUPS},groups:{get(){return this.$store.getters["CUSTOMERS/groups"](this.id)},set(t){this.$store.commit("CUSTOMERS/groups",{customer:this.id,groups:t})}}},methods:{update(){this.$store.dispatch("CUSTOMERS/groups",{customer:this.id,groups:this.groups})}}},X=W,Z=a("8f8e"),tt=Object(c["a"])(X,Y,K,!1,null,null,null),et=tt.exports;v()(tt,"components",{QCard:u["a"],QCardSection:p["a"],QList:z["a"],QItem:E["a"],QItemSection:R["a"],QCheckbox:Z["a"],QItemLabel:I["a"],QCardActions:f["a"],QBtn:b["a"]}),v()(tt,"directives",{Ripple:O["a"]});var at={name:"PageCustomer",components:{CustomerGroupsCard:et,UpdateAddressCard:V,UpdateCustomerCard:x},props:["id"],mixins:[S["a"]]},st=at,rt=a("9989"),it=Object(c["a"])(st,s,r,!1,null,null,null);e["default"]=it.exports;v()(it,"components",{QPage:rt["a"]})}}]);