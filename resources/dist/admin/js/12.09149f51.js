(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"74c9":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:e.cls},[s("q-btn",{staticClass:"q-px-sm q-py-xs",attrs:{dense:"",size:"sm",label:"Back",icon:"reply_all",color:"warning",to:e.to}})],1)},a=[],r={name:"BackButton",props:["right","to"],computed:{cls(){return void 0!==this.right?["text-right"]:["text-left"]}}},o=r,l=s("2877"),n=s("9c40"),c=s("eebe"),u=s.n(c),p=Object(l["a"])(o,i,a,!1,null,null,null);t["a"]=p.exports;u()(p,"components",{QBtn:n["a"]})},f294:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{attrs:{padding:""}},[s("BackButton",{staticClass:"q-mb-sm",attrs:{right:"",to:{name:"sources"}}}),s("q-form",{ref:"source_create_form",attrs:{autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false"}},[s("q-list",{attrs:{bordered:""}},[s("q-expansion-item",{attrs:{group:"source",icon:"how_to_vote",label:"Basic Details","default-opened":"","header-class":"text-primary"}},[s("q-card",[s("q-card-section",{staticClass:"q-pt-none q-gutter-xs"},[s("q-input",{attrs:{type:"text",name:"title",dense:"",outlined:"",label:"Name"},model:{value:e.basic.title,callback:function(t){e.$set(e.basic,"title",t)},expression:"basic.title"}}),s("q-input",{staticStyle:{height:"4rem"},attrs:{type:"textarea",name:"description",dense:"",outlined:"",label:"Description"},model:{value:e.basic.description,callback:function(t){e.$set(e.basic,"description",t)},expression:"basic.description"}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.expire,expression:"expire"}],attrs:{type:"hidden",name:"expire"},domProps:{value:e.expire},on:{input:function(t){t.target.composing||(e.expire=t.target.value)}}}),s("div",{staticClass:"q-mt-sm text-bold"},[e._v("Expire After")]),s("div",{staticClass:"row text-bold q-my-none"},[s("q-input",{staticClass:"col-6",attrs:{type:"number",dense:"",outlined:""},model:{value:e.exp_num,callback:function(t){e.exp_num=t},expression:"exp_num"}}),s("q-select",{staticClass:"col-6",attrs:{dense:"",outlined:"",options:e.exp_period_opts,"emit-value":"","map-options":""},model:{value:e.exp_period,callback:function(t){e.exp_period=t},expression:"exp_period"}})],1),s("div",{staticClass:"q-mt-sm text-bold"},[e._v("Image")]),s("div",{staticClass:"row"},[s("q-input",{attrs:{type:"file",name:"image",borderless:"",dense:""},model:{value:e.basic.image,callback:function(t){e.$set(e.basic,"image",t)},expression:"basic.image"}})],1)],1)],1)],1),s("q-separator"),s("q-expansion-item",{attrs:{group:"source",icon:"groups",label:"Group","header-class":"text-primary"}},[s("q-card",[s("q-card-section",{staticClass:"q-pt-none"},[s("q-input",{staticClass:"q-mb-xs",attrs:{outlined:"",dense:"",clearable:""},model:{value:e.g_filter,callback:function(t){e.g_filter=t},expression:"g_filter"}}),s("q-option-group",{attrs:{options:e.f_group_list,type:"checkbox",dense:""},model:{value:e.groups,callback:function(t){e.groups=t},expression:"groups"}})],1)],1)],1),s("q-separator"),s("q-expansion-item",{attrs:{group:"source",icon:"how_to_reg",label:"Customers","header-class":"text-primary"}},[s("q-card",[s("q-card-section",{staticClass:"q-pt-none"},[s("q-input",{staticClass:"q-mb-xs",attrs:{outlined:"",dense:"",clearable:""},model:{value:e.c_filter,callback:function(t){e.c_filter=t},expression:"c_filter"}}),s("q-option-group",{attrs:{options:e.f_customer_list,name:"customers[]",type:"checkbox",dense:""},model:{value:e.customers,callback:function(t){e.customers=t},expression:"customers"}})],1)],1)],1),s("q-separator"),s("q-expansion-item",{attrs:{group:"source",icon:"category",label:"Items","header-class":"text-primary"}},[s("q-card",[s("q-card-section",{staticClass:"q-pt-none"},[s("q-input",{staticClass:"q-mb-xs",attrs:{outlined:"",dense:"",clearable:""},model:{value:e.i_filter,callback:function(t){e.i_filter=t},expression:"i_filter"}}),s("q-list",{attrs:{dense:"",separator:""}},e._l(e.f_item_list,(function(t){return s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:["source","create","item","list",t.id].join("-"),attrs:{tag:"label",dense:""}},[s("q-item-section",{attrs:{avatar:""}},[s("q-checkbox",{attrs:{name:"items[]",val:t.id,value:t.id},model:{value:e.items,callback:function(t){e.items=t},expression:"items"}})],1),s("q-item-section",[e._v(e._s(t.name))]),s("q-item-section",{attrs:{side:""}},[s("q-input",{staticStyle:{width:"5rem"},attrs:{type:"number",outlined:"",dense:"",name:"item["+t.id+"]"},on:{input:function(s){return e.items.includes(t.id)?null:e.items.push(t.id)}},model:{value:e.item_price[t.id],callback:function(s){e.$set(e.item_price,t.id,s)},expression:"item_price[item.id]"}})],1)],1)})),1)],1)],1)],1),s("q-separator"),s("q-expansion-item",{attrs:{group:"source",icon:"widgets",label:"Categories","header-class":"text-primary"}},[s("q-card",[s("q-card-section",{staticClass:"q-pt-none"},[s("q-input",{staticClass:"q-mb-xs",attrs:{outlined:"",dense:"",clearable:""},model:{value:e.t_filter,callback:function(t){e.t_filter=t},expression:"t_filter"}}),s("q-list",{attrs:{dense:"",separator:""}},e._l(e.f_category_list,(function(t){return s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:["source","create","category","list",t.id].join("-"),attrs:{tag:"label",dense:""}},[s("q-item-section",{attrs:{avatar:""}},[s("q-checkbox",{attrs:{name:"categories[]",val:t.id,value:t.id},model:{value:e.categories,callback:function(t){e.categories=t},expression:"categories"}})],1),s("q-item-section",[e._v(e._s(t.name))]),s("q-item-section",{attrs:{side:""}},[s("q-input",{staticStyle:{width:"5rem"},attrs:{type:"number",outlined:"",dense:"",name:"category["+t.id+"]"},on:{input:function(s){return e.categories.includes(t.id)?0:e.categories.push(t.id)}},model:{value:e.category_disc[t.id],callback:function(s){e.$set(e.category_disc,t.id,s)},expression:"category_disc[category.id]"}})],1)],1)})),1)],1)],1)],1),s("q-separator"),s("q-expansion-item",{attrs:{group:"source",icon:"backup_table",label:"Submit","header-class":"text-primary"}},[s("q-card",[s("q-card-section",[s("div",{staticClass:"text-bold"},[e._v(e._s(e.basic.title))]),s("div",{staticClass:"text-caption"},[e._v(e._s(e.basic.description))]),s("div",{staticClass:"text-caption"},[s("strong",[e._v("Image Uploaded:")]),e._v(" "+e._s(e.basic.image?"Yes":"No"))]),s("div",{staticClass:"text-bold"},[e._v("Customers: "+e._s(e.customers.length||"All"))]),s("div",{staticClass:"text-bold"},[e._v("Categories: "+e._s(e.categories.length||"None"))]),s("div",{staticClass:"text-bold"},[e._v("Items: "+e._s(e.items.length||"None"))])]),s("q-card-actions",[s("q-btn",{staticClass:"full-width",attrs:{color:"primary",push:"",label:"CREATE SOURCE",loading:e.loading},on:{click:e.create}})],1)],1)],1)],1)],1)],1)},a=[],r=s("74c9"),o={name:"PageSourceCreate",components:{BackButton:r["a"]},data(){return{loading:!1,g_filter:"",c_filter:"",i_filter:"",t_filter:"",exp_num:1,exp_period:60,exp_period_opts:[{label:"Minute",value:60},{label:"Hour",value:3600},{label:"Day",value:86400}],groups:[],customers:[],items:[],categories:[],basic:{title:"",description:"",image:""},group_list:_.map(this.$store.state.CUSTOMERS.GROUPS,(({id:e,name:t})=>_.zipObject(["value","label"],[e,t]))),customer_list:_.map(this.$store.state.CUSTOMERS.CUSTOMERS,(({id:e,name:t,phone:s})=>_.zipObject(["value","label"],[e,t+", "+s]))),item_list:_.map(this.$store.state.ITEMS.ITEMS,(({id:e,name:t,selling:s,price:i})=>new Object({id:e,name:t,price:i,selling:s}))),category_list:_.map(this.$store.state.CATEGORIES.CATEGORIES,(({id:e,name:t})=>new Object({id:e,name:t}))),item_price:_.mapValues(this.$store.state.ITEMS.ITEMS,(({selling:e,price:t})=>e||t)),category_disc:_.mapValues(this.$store.state.CATEGORIES.CATEGORIES,(()=>0))}},computed:{expire(){return _.toSafeInteger(this.exp_num)*_.toSafeInteger(this.exp_period)},all_groups(){return _.keyBy(this.$store.state.CUSTOMERS.GROUPS,"id")},f_group_list(){return this.g_filter?_.filter(this.group_list,(({label:e})=>_.includes(_.toLower(e),_.toLower(this.g_filter)))):this.group_list},f_customer_list(){return this.c_filter?_.filter(this.customer_list,(({label:e})=>_.includes(_.toLower(e),_.toLower(this.c_filter)))):this.customer_list},f_item_list(){return this.i_filter?_.filter(this.item_list,(({name:e})=>_.includes(_.toLower(e),_.toLower(this.i_filter)))):this.item_list},f_category_list(){return this.t_filter?_.filter(this.category_list,(({name:e})=>_.includes(_.toLower(e),_.toLower(this.t_filter)))):this.category_list}},methods:{create(){if(this.loading=!0,(this.items.length||this.categories.length)&&this.basic.title){let e=new FormData(this.$refs["source_create_form"].$el);this.$store.dispatch("SOURCES/create",e).then((({id:e})=>{this.loading=!1,this.$router.push({name:"source",params:{id:e}})}))}else this.loading=!1}},watch:{groups(e,t){let s=null,i=null;e.length>t.length?s=_.difference(e,t):e.length<t.length&&(i=_.difference(t,e)),s&&(this.customers=_.uniq(_.concat(this.customers,this.all_groups[s[0]].customers))),i&&(this.customers=_.uniq(_.difference(this.customers,this.all_groups[i[0]].customers)))}}},l=o,n=s("2877"),c=s("9989"),u=s("0378"),p=s("1c1c"),d=s("3b73"),m=s("f09f"),g=s("a370"),f=s("27f9"),b=s("ddd8"),h=s("eb85"),x=s("9f0a"),q=s("66e5"),v=s("4074"),C=s("8f8e"),y=s("4b7e"),k=s("9c40"),S=s("714f"),w=s("eebe"),E=s.n(w),O=Object(n["a"])(l,i,a,!1,null,null,null);t["default"]=O.exports;E()(O,"components",{QPage:c["a"],QForm:u["a"],QList:p["a"],QExpansionItem:d["a"],QCard:m["a"],QCardSection:g["a"],QInput:f["a"],QSelect:b["a"],QSeparator:h["a"],QOptionGroup:x["a"],QItem:q["a"],QItemSection:v["a"],QCheckbox:C["a"],QCardActions:y["a"],QBtn:k["a"]}),E()(O,"directives",{Ripple:S["a"]})}}]);