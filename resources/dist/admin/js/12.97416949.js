(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"74c9":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.cls},[i("q-btn",{staticClass:"q-px-sm q-py-xs",attrs:{dense:"",size:"sm",label:"Back",icon:"reply_all",color:"warning",to:e.to}})],1)},a=[],r={name:"BackButton",props:["right","to"],computed:{cls(){return void 0!==this.right?["text-right"]:["text-left"]}}},o=r,l=i("2877"),c=i("9c40"),n=i("eebe"),p=i.n(n),d=Object(l["a"])(o,s,a,!1,null,null,null);t["a"]=d.exports;p()(d,"components",{QBtn:c["a"]})},f294:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-page",{attrs:{padding:""}},[i("BackButton",{staticClass:"q-mb-sm",attrs:{right:"",to:{name:"sources"}}}),i("q-form",{ref:"source_create_form",attrs:{autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false"}},[i("q-list",{attrs:{bordered:""}},[i("q-expansion-item",{attrs:{group:"source",icon:"how_to_vote",label:"Basic Details","default-opened":"","header-class":"text-primary"}},[i("q-card",[i("q-card-section",{staticClass:"q-pt-none q-gutter-xs"},[i("q-input",{attrs:{type:"text",name:"title",dense:"",outlined:"",label:"Name"},model:{value:e.basic.title,callback:function(t){e.$set(e.basic,"title",t)},expression:"basic.title"}}),i("q-input",{staticStyle:{height:"4rem"},attrs:{type:"textarea",name:"description",dense:"",outlined:"",label:"Description"},model:{value:e.basic.description,callback:function(t){e.$set(e.basic,"description",t)},expression:"basic.description"}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.expire,expression:"expire"}],attrs:{type:"hidden",name:"expire"},domProps:{value:e.expire},on:{input:function(t){t.target.composing||(e.expire=t.target.value)}}}),i("div",{staticClass:"q-mt-sm text-bold"},[e._v("Expire After")]),i("div",{staticClass:"row text-bold q-my-none"},[i("q-input",{staticClass:"col-6",attrs:{type:"number",dense:"",outlined:""},model:{value:e.exp_num,callback:function(t){e.exp_num=t},expression:"exp_num"}}),i("q-select",{staticClass:"col-6",attrs:{dense:"",outlined:"",options:e.exp_period_opts,"emit-value":"","map-options":""},model:{value:e.exp_period,callback:function(t){e.exp_period=t},expression:"exp_period"}})],1),i("div",{staticClass:"q-mt-sm text-bold"},[e._v("Image")]),i("div",{staticClass:"row"},[i("q-input",{attrs:{type:"file",name:"image",borderless:"",dense:""},model:{value:e.basic.image,callback:function(t){e.$set(e.basic,"image",t)},expression:"basic.image"}})],1)],1)],1)],1),i("q-separator"),i("q-expansion-item",{attrs:{group:"source",icon:"how_to_reg",label:"Customers","header-class":"text-primary"}},[i("q-card",[i("q-card-section",{staticClass:"q-pt-none"},[i("q-input",{staticClass:"q-mb-xs",attrs:{outlined:"",dense:"",clearable:""},model:{value:e.c_filter,callback:function(t){e.c_filter=t},expression:"c_filter"}}),i("q-option-group",{attrs:{options:e.f_customer_list,name:"customers[]",type:"checkbox",dense:""},model:{value:e.customers,callback:function(t){e.customers=t},expression:"customers"}})],1)],1)],1),i("q-separator"),i("q-expansion-item",{attrs:{group:"source",icon:"category",label:"Items","header-class":"text-primary"}},[i("q-card",[i("q-card-section",{staticClass:"q-pt-none"},[i("q-input",{staticClass:"q-mb-xs",attrs:{outlined:"",dense:"",clearable:""},model:{value:e.i_filter,callback:function(t){e.i_filter=t},expression:"i_filter"}}),i("q-list",{attrs:{dense:"",separator:""}},e._l(e.f_item_list,(function(t){return i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:["source","create","item","list",t.id].join("-"),attrs:{tag:"label",dense:""}},[i("q-item-section",{attrs:{avatar:""}},[i("q-checkbox",{attrs:{name:"items[]",val:t.id,value:t.id},model:{value:e.items,callback:function(t){e.items=t},expression:"items"}})],1),i("q-item-section",[e._v(e._s(t.name))]),i("q-item-section",{attrs:{side:""}},[i("q-input",{staticStyle:{width:"5rem"},attrs:{type:"number",outlined:"",dense:"",name:"item["+t.id+"]"},on:{input:function(i){return e.items.includes(t.id)?null:e.items.push(t.id)}},model:{value:e.item_price[t.id],callback:function(i){e.$set(e.item_price,t.id,i)},expression:"item_price[item.id]"}})],1)],1)})),1)],1)],1)],1),i("q-separator"),i("q-expansion-item",{attrs:{group:"source",icon:"widgets",label:"Categories","header-class":"text-primary"}},[i("q-card",[i("q-card-section",{staticClass:"q-pt-none"},[i("q-input",{staticClass:"q-mb-xs",attrs:{outlined:"",dense:"",clearable:""},model:{value:e.t_filter,callback:function(t){e.t_filter=t},expression:"t_filter"}}),i("q-list",{attrs:{dense:"",separator:""}},e._l(e.f_category_list,(function(t){return i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:["source","create","category","list",t.id].join("-"),attrs:{tag:"label",dense:""}},[i("q-item-section",{attrs:{avatar:""}},[i("q-checkbox",{attrs:{name:"categories[]",val:t.id,value:t.id},model:{value:e.categories,callback:function(t){e.categories=t},expression:"categories"}})],1),i("q-item-section",[e._v(e._s(t.name))]),i("q-item-section",{attrs:{side:""}},[i("q-input",{staticStyle:{width:"5rem"},attrs:{type:"number",outlined:"",dense:"",name:"category["+t.id+"]"},on:{input:function(i){return e.categories.includes(t.id)?0:e.categories.push(t.id)}},model:{value:e.category_disc[t.id],callback:function(i){e.$set(e.category_disc,t.id,i)},expression:"category_disc[category.id]"}})],1)],1)})),1)],1)],1)],1),i("q-separator"),i("q-expansion-item",{attrs:{group:"source",icon:"backup_table",label:"Submit","header-class":"text-primary"}},[i("q-card",[i("q-card-section",[i("div",{staticClass:"text-bold"},[e._v(e._s(e.basic.title))]),i("div",{staticClass:"text-caption"},[e._v(e._s(e.basic.description))]),i("div",{staticClass:"text-caption"},[i("strong",[e._v("Image Uploaded:")]),e._v(" "+e._s(e.basic.image?"Yes":"No"))]),i("div",{staticClass:"text-bold"},[e._v("Customers: "+e._s(e.customers.length||"All"))]),i("div",{staticClass:"text-bold"},[e._v("Categories: "+e._s(e.categories.length||"None"))]),i("div",{staticClass:"text-bold"},[e._v("Items: "+e._s(e.items.length||"None"))])]),i("q-card-actions",[i("q-btn",{staticClass:"full-width",attrs:{color:"primary",push:"",label:"CREATE SOURCE",loading:e.loading},on:{click:e.create}})],1)],1)],1)],1)],1)],1)},a=[],r=i("74c9"),o={name:"PageSourceCreate",components:{BackButton:r["a"]},data(){return{loading:!1,c_filter:"",i_filter:"",t_filter:"",exp_num:1,exp_period:60,exp_period_opts:[{label:"Minute",value:60},{label:"Hour",value:3600},{label:"Day",value:86400}],customers:[],items:[],categories:[],basic:{title:"",description:"",image:""},customer_list:_.map(this.$store.state.CUSTOMERS.CUSTOMERS,(({id:e,name:t,phone:i})=>_.zipObject(["value","label"],[e,t+", "+i]))),item_list:_.map(this.$store.state.ITEMS.ITEMS,(({id:e,name:t,selling:i,price:s})=>new Object({id:e,name:t,price:s,selling:i}))),category_list:_.map(this.$store.state.CATEGORIES.CATEGORIES,(({id:e,name:t})=>new Object({id:e,name:t}))),item_price:_.mapValues(this.$store.state.ITEMS.ITEMS,(({selling:e,price:t})=>e||t)),category_disc:_.mapValues(this.$store.state.CATEGORIES.CATEGORIES,(()=>0))}},computed:{expire(){return _.toSafeInteger(this.exp_num)*_.toSafeInteger(this.exp_period)},f_customer_list(){return this.c_filter?_.filter(this.customer_list,(({label:e})=>_.includes(_.toLower(e),_.toLower(this.c_filter)))):this.customer_list},f_item_list(){return this.i_filter?_.filter(this.item_list,(({name:e})=>_.includes(_.toLower(e),_.toLower(this.i_filter)))):this.item_list},f_category_list(){return this.t_filter?_.filter(this.category_list,(({name:e})=>_.includes(_.toLower(e),_.toLower(this.t_filter)))):this.category_list}},methods:{create(){if(this.loading=!0,(this.items.length||this.categories.length)&&this.basic.title){let e=new FormData(this.$refs["source_create_form"].$el);this.$store.dispatch("SOURCES/create",e).then((({id:e})=>{this.loading=!1,this.$router.push({name:"source",params:{id:e}})}))}else this.loading=!1}}},l=o,c=i("2877"),n=i("9989"),p=i("0378"),d=i("1c1c"),m=i("3b73"),u=i("f09f"),b=i("a370"),f=i("27f9"),g=i("ddd8"),x=i("eb85"),h=i("9f0a"),q=i("66e5"),v=i("4074"),C=i("8f8e"),y=i("4b7e"),k=i("9c40"),w=i("714f"),S=i("eebe"),E=i.n(S),I=Object(c["a"])(l,s,a,!1,null,null,null);t["default"]=I.exports;E()(I,"components",{QPage:n["a"],QForm:p["a"],QList:d["a"],QExpansionItem:m["a"],QCard:u["a"],QCardSection:b["a"],QInput:f["a"],QSelect:g["a"],QSeparator:x["a"],QOptionGroup:h["a"],QItem:q["a"],QItemSection:v["a"],QCheckbox:C["a"],QCardActions:y["a"],QBtn:k["a"]}),E()(I,"directives",{Ripple:w["a"]})}}]);