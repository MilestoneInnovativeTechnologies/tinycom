(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"726e":function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));var s=a("74c9");const i={props:["back"],components:{BackButton:s["a"]},computed:{hasBack(){return!!this.back},backRoute(){return this.hasBack?this.getBackRoute():null}},methods:{getBackRoute(){let t=this.back;return _.isString(t)?{name:t}:_.isArray(t)?{name:t[0],params:{id:t[1]}}:null}}}},"74c9":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.cls},[a("q-btn",{staticClass:"q-px-sm q-py-xs",attrs:{dense:"",size:"sm",label:"Back",icon:"reply_all",color:"warning",to:t.to}})],1)},i=[],r={name:"BackButton",props:["right","to"],computed:{cls(){return void 0!==this.right?["text-right"]:["text-left"]}}},l=r,n=a("2877"),o=a("9c40"),c=a("eebe"),d=a.n(c),u=Object(n["a"])(l,s,i,!1,null,null,null);e["a"]=u.exports;d()(u,"components",{QBtn:o["a"]})},"74e7":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{attrs:{padding:""}},[a("BillDetailCard",{staticClass:"q-mx-auto",staticStyle:{"max-width":"55vh"},attrs:{id:t.id}}),a("BillShareCard",{staticClass:"q-mt-sm q-mx-auto",staticStyle:{"max-width":"55vh"},attrs:{id:t.id}}),a("BillActionCard",{staticClass:"q-mt-sm q-mx-auto",staticStyle:{"max-width":"55vh"},attrs:{id:t.id}}),t.hasBack?a("BackButton",{staticClass:"q-mx-auto q-mt-sm",staticStyle:{"max-width":"55vh"},attrs:{right:"",to:t.backRoute}}):t._e()],1)},i=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{class:{delivered:t.delivered},attrs:{bordered:"",flat:""}},[a("q-card-section",[a("div",{staticClass:"text-h6 text-center"},[t._v(t._s(t.COMPANY))])]),a("q-list",{attrs:{dense:"",padding:"",bordered:""}},t._l(t.layout,(function(e,s){return a("q-item",{key:["bill","head",e].join("-")},[a("q-item-section",[t._v(t._s(s))]),a("q-item-section",{staticClass:"text-black",attrs:{side:""}},[t._v(t._s(t.dBill[e]))])],1)})),1),a("q-markup-table",{staticClass:"bg-transparent text-left"},[a("thead",[a("q-tr",[a("q-th",[t._v("#")]),a("q-th",{staticClass:"text-left"},[t._v("Item")]),a("q-th",[t._v("Rate")]),a("q-th",[t._v("Qty")]),a("q-th",[t._v("Total")])],1)],1),a("tbody",t._l(t.bill.items,(function(e,s){return a("q-tr",{key:["bill","detail","item",s].join("-")},[a("q-td",[t._v(t._s(s+1))]),a("q-td",{staticClass:"text-left"},[t._v(t._s(t.itemName(e.item)))]),a("q-td",{staticClass:"text-right"},[t._v(t._s(e.price))]),a("q-td",[t._v(t._s(e.quantity))]),a("q-td",{staticClass:"text-right"},[t._v(t._s(e.amount))])],1)})),1)]),a("q-separator"),a("q-card-section",{staticClass:"text-center"},[a("div",{staticClass:"text-h5 text-weight-bolder"},[t._v(t._s(t.bill.total))]),t.delivered&&t.bill.amount!=t.bill.total?a("p",{staticClass:"text-center",staticStyle:{"font-size":"0.8rem"}},[t._v("Paid "+t._s(t.bill.amount)+"/-")]):t._e()])],1)},l=[];const{extractDate:n,formatDate:o}=a("fe09").date;var c={name:"BillDetailCard",props:["id"],data(){return{COMPANY:COMPANY,layout:{"Bill #":"id",Date:"confirmed_date",Time:"confirmed_time",Customer:"customer_name",Phone:"customer_phone"}}},computed:{bill(){return this.$store.getters["CARTS/cart"](this.id)},date(){return n(this.bill.confirmed_at,"YYYY-MM-DD HH:mm:ss")},dBill(){return _.assign({},this.bill,{confirmed_date:o(this.date,"DD/MMM/YYYY"),confirmed_time:o(this.date,"hh:mm A")})},delivered(){return"Delivered"===this.bill.status},address(){return _.get(this.$store.getters["CUSTOMERS/address"],[this.bill.address,"address"])}},methods:{itemName(t){return _.get(this.$store.state.ITEMS.ITEMS,[t,"name"],t)}}},d=c,u=(a("a5bb"),a("2877")),m=a("f09f"),p=a("a370"),h=a("1c1c"),b=a("66e5"),v=a("4074"),q=a("2bb1"),C=a("bd08"),f=a("357e"),g=a("db86"),x=a("eb85"),B=a("eebe"),S=a.n(B),k=Object(u["a"])(d,r,l,!1,null,"63270c78",null),Q=k.exports;S()(k,"components",{QCard:m["a"],QCardSection:p["a"],QList:h["a"],QItem:b["a"],QItemSection:v["a"],QMarkupTable:q["a"],QTr:C["a"],QTh:f["a"],QTd:g["a"],QSeparator:x["a"]});var y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.bill?a("q-card",[a("q-card-section",{staticClass:"q-pb-none"},[a("q-input",{staticStyle:{height:"4rem"},attrs:{type:"textarea",outlined:"",dense:"",value:t.url,label:"Sharable Link"}})],1),a("q-card-actions",{staticClass:"q-px-md q-gutter-sm"},[a("q-btn",{attrs:{type:"a",push:"",color:"primary",label:"Share via WhatsApp",href:t.whatsapp,target:"_blank"}})],1)],1):t._e()},w=[],A={name:"BillShareCard",props:["id"],data(){return{}},computed:{bill(){return this.$store.getters["CARTS/cart"](this.id)},url(){return urlParse("BILL_LINK",{uuid:this.bill.uuid})},whatsapp(){return urlParse("WHATSAPP",{phone:"91"+this.bill.customer_phone,text:this.url})},delivered(){return"Delivered"===this.bill.status}},methods:{itemName(t){return _.get(_.head(_.filter(this.$store.state.ITEMS.ITEMS,["id",t])),"name")}}},T=A,D=a("27f9"),M=a("4b7e"),P=a("9c40"),$=Object(u["a"])(T,y,w,!1,null,null,null),I=$.exports;S()($,"components",{QCard:m["a"],QCardSection:p["a"],QInput:D["a"],QCardActions:M["a"],QBtn:P["a"]});var Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.delivered?t._e():a("q-card",[a("q-card-actions",{staticClass:"q-px-md"},[a("q-btn",{staticClass:"full-width",attrs:{push:"",color:"primary",label:"Mark as Delivered",loading:t.loading},on:{click:function(e){return t.deliver(null)}}})],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.prompt,callback:function(e){t.prompt=e},expression:"prompt"}},[a("q-card",[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Collection")])]),a("q-card-section",{staticClass:"q-pt-none"},[a("q-input",{attrs:{dense:"",autofocus:""},model:{value:t.collection,callback:function(e){t.collection=e},expression:"collection"}})],1),a("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{loading:t.loading,flat:"",label:"Submit"},on:{click:function(e){return t.deliver(t.collection)}}})],1)],1)],1)],1)},E=[],R=a("8107"),N={name:"BillActionCard",props:["id"],data(){return{loading:!1,prompt:!1,collection:0}},computed:{bill(){return this.$store.getters["CARTS/cart"](this.id)},delivered(){return"Delivered"===this.bill.status}},methods:{deliver(t){if(this.prompt=!1,this.collection=this.bill.total,null===t)return this.prompt=!0;this.loading=!0,this.$store.dispatch("CARTS/delivered",R["a"].obj({id:this.bill.id,amount:t})).then((()=>this.loading=this.prompt=!1))}}},O=N,j=a("24e8"),L=a("7f67"),H=Object(u["a"])(O,Y,E,!1,null,null,null),z=H.exports;S()(H,"components",{QCard:m["a"],QCardActions:M["a"],QBtn:P["a"],QDialog:j["a"],QCardSection:p["a"],QInput:D["a"]}),S()(H,"directives",{ClosePopup:L["a"]});var J=a("726e"),W={name:"PageBill",components:{BillActionCard:z,BillShareCard:I,BillDetailCard:Q},mixins:[J["a"]],props:["id"]},K=W,U=a("9989"),F=Object(u["a"])(K,s,i,!1,null,null,null);e["default"]=F.exports;S()(F,"components",{QPage:U["a"]})},"85d7":function(t,e,a){},a5bb:function(t,e,a){"use strict";var s=a("85d7"),i=a.n(s);i.a}}]);